// |===================================|
// |  EasyISP â€” Simple Isp Multiplier 
// |
// |  Scale engine Isp via the `atmosphereCurve` values
// |  Applies to all parts with ModuleEngines|ModuleEnginesFX
// |
// |===================================|
// |
// |  Adjust the values in the area below
// |  Save the file and start KSP
// |
// |===================================|

EASYISP_SETTINGS
{
  seaLevelMultiplier = 1  // <- Change this number to adjust sea level Isp for all engines
  vacuumMultiplier   = 5  // <- Change this number to adjust vacuum Isp for all engines
}

// |===================================|
// |  1.0 = no change
// |  2.0 = double Isp
// |  0.5 = half Isp
// |  1000 = "The Expanse"ish
// |===================================|

@PART[*]:HAS[@MODULE[ModuleEngines*]]:AFTER[EasyISP]
{
  @MODULE[ModuleEngines*],*
  {
    @atmosphereCurve:HAS[#key[0,*],!key[1,*],!key[2,*]]
    {
      // Normalize single-key curves so they expose a sea-level entry.
      k0_raw = #$key,0[1, ]$
      key = 1 $k0_raw$ 0 0
    }

    @atmosphereCurve
    {
      // Pull multipliers from the global settings node.
      multSL  = #$@EASYISP_SETTINGS/seaLevelMultiplier$
      multVac = #$@EASYISP_SETTINGS/vacuumMultiplier$

      // key,0 = vacuum Isp | key,1 = sea-level(ASL) Isp.
      // We read the Isp (2nd value) from each key, multiply it, then write it back.
      k0 = #$key,0[1, ]$
      @k0 *= #$multVac$
      @key,0 = #0 $k0$

      k1 = #$key,1[1, ]$
      @k1 *= #$multSL$
      @key,1 = #1 $k1$
    }
  }
}
